<!DOCTYPE html><html lang="en" dir="ltr"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 32.2.3">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
:is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
.example pre{background-color:rgba(0,0,0,.03)}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"‚ö†";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
    
<title>Payment Method Identifiers</title>
    
    
    
  
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"¬ß";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<style>
ul.index{columns:30ch;column-gap:1.5em}
ul.index li{list-style:inherit}
ul.index li span{color:inherit;cursor:pointer;white-space:normal}
#index-defined-here ul.index li{font-size:.9rem}
ul.index code{color:inherit}
#index-defined-here .print-only{display:none}
@media print{
#index-defined-here .print-only{display:initial}
}
</style>
<meta name="description" content="This specification defines payment method identifiers and how they are
        validated, and, where applicable, minted and formally registered with
        the W3C. Other specifications (e.g.,
        the Payment Request API) make use of these identifiers to facilitate
        monetary transactions on the web platform.">
<link rel="canonical" href="https://www.w3.org/TR/payment-method-id/">
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "shortName": "payment-method-id",
  "github": "w3c/payment-method-id",
  "specStatus": "REC",
  "group": "payments",
  "formerEditors": [
    {
      "name": "Adrian Bateman",
      "company": "Microsoft Corporation",
      "w3cid": 42763
    },
    {
      "name": "Domenic Denicola",
      "company": "Google",
      "w3cid": 52873
    },
    {
      "name": "Zach Koch",
      "company": "Google",
      "w3cid": 76588
    },
    {
      "name": "Roy McElmurry",
      "company": "Facebook",
      "w3cid": 88345
    }
  ],
  "editors": [
    {
      "name": "Marcos C√°ceres",
      "company": "Apple Inc.",
      "companyURL": "https://www.apple.com/",
      "w3cid": 39125
    }
  ],
  "crEnd": "2019-10-01",
  "prEnd": "2021-10-28",
  "previousMaturity": "PER",
  "previousPublishDate": "2021-09-30",
  "errata": "https://www.w3.org/Payments/WG/errata.html",
  "implementationReportURI": "https://w3c.github.io/test-results/payment-method-id/all.html",
  "testSuiteURI": "https://wpt.live/payment-method-id/",
  "xref": [
    "URL",
    "HTML",
    "FETCH",
    "INFRA"
  ],
  "publishDate": "2022-09-08",
  "publishISODate": "2022-09-08T00:00:00.000Z",
  "generatedSubtitle": "W3C Recommendation 08 September 2022"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-REC"></head>
  <body class="h-entry" data-cite="URL HTML FETCH INFRA"><div class="head">
    <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
  </a></p>
    <h1 id="title" class="title">Payment Method Identifiers</h1> 
    <p id="w3c-state"><a href="https://www.w3.org/standards/types#REC">W3C Recommendation</a> <time class="dt-published" datetime="2022-09-08">08 September 2022</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        <dt>This version:</dt><dd>
                <a class="u-url" href="https://www.w3.org/TR/2022/REC-payment-method-id-20220908/">https://www.w3.org/TR/2022/REC-payment-method-id-20220908/</a>
              </dd>
        <dt>Latest published version:</dt><dd>
                <a href="https://www.w3.org/TR/payment-method-id/">https://www.w3.org/TR/payment-method-id/</a>
              </dd>
        <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/payment-method-id/">https://w3c.github.io/payment-method-id/</a></dd>
        <dt>History:</dt><dd>
                    <a href="https://www.w3.org/standards/history/payment-method-id">https://www.w3.org/standards/history/payment-method-id</a>
                  </dd><dd>
                    <a href="https://github.com/w3c/payment-method-id/commits/">Commit history</a>
                  </dd>
        <dt>Test suite:</dt><dd><a href="https://wpt.live/payment-method-id/">https://wpt.live/payment-method-id/</a></dd>
        <dt>Implementation report:</dt><dd>
                <a href="https://w3c.github.io/test-results/payment-method-id/all.html">https://w3c.github.io/test-results/payment-method-id/all.html</a>
              </dd>
        
        
        
        <dt>Editor:</dt><dd class="editor p-author h-card vcard" data-editor-id="39125">
    <span class="p-name fn">Marcos C√°ceres</span> (<a class="p-org org h-org" href="https://www.apple.com/">Apple Inc.</a>)
  </dd>
        <dt>
                Former editors:
              </dt><dd class="editor p-author h-card vcard" data-editor-id="42763">
    <span class="p-name fn">Adrian Bateman</span> (<span class="p-org org h-org">Microsoft Corporation</span>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="52873">
    <span class="p-name fn">Domenic Denicola</span> (<span class="p-org org h-org">Google</span>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="76588">
    <span class="p-name fn">Zach Koch</span> (<span class="p-org org h-org">Google</span>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="88345">
    <span class="p-name fn">Roy McElmurry</span> (<span class="p-org org h-org">Facebook</span>)
  </dd>
        
        <dt>Feedback:</dt><dd>
        <a href="https://github.com/w3c/payment-method-id/">GitHub w3c/payment-method-id</a>
        (<a href="https://github.com/w3c/payment-method-id/pulls/">pull requests</a>,
        <a href="https://github.com/w3c/payment-method-id/issues/new/choose">new issue</a>,
        <a href="https://github.com/w3c/payment-method-id/issues/">open issues</a>)
      </dd>
        <dt>Errata:</dt><dd><a href="https://www.w3.org/Payments/WG/errata.html">Errata exists</a>.</dd>
        
      </dl>
    </details>
    <p>
          See also
          <a href="https://www.w3.org/Translations/?technology=payment-method-id">
            <strong>translations</strong></a>.
        </p>
    
    <p class="copyright">
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    ¬©
    2022
    
    <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>¬Æ</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
    <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>,
    <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
    <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
  </p>
    <hr title="Separator for header">
  </div>
    <section id="abstract" class="introductory"><h2>Abstract</h2>
      <p>
        This specification defines payment method identifiers and how they are
        validated, and, where applicable, minted and formally registered with
        the <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a>. Other specifications (e.g.,
        the <cite><a data-matched-text="[[[payment-request]]]" href="https://www.w3.org/TR/payment-request/" id="ref-for-index-term-payment-request-api-1">Payment Request API</a></cite>) make use of these identifiers to facilitate
        monetary transactions on the web platform.
      </p>
    </section>
    <section id="sotd" class="updateable-rec introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this
      document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr>
      publications and the latest revision of this technical report can be found
      in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p>
      <p>
        The working group demonstrates implementation experience by producing
        an <a href="https://w3c.github.io/test-results/payment-method-id/all.html">implementation
        report</a>. The report shows two or more independent implementations
        passing each mandatory test in the <a href="https://wpt.live/payment-method-id/">test suite</a> (i.e., each test
        corresponds to a <em class="rfc2119">MUST</em> requirement of the specification).
      </p>
      <p>
        There has been no change in dependencies on other workings groups
        during the development of this specification.
      </p>
    <p>
    This document was published by the <a href="https://www.w3.org/groups/wg/payments">Web Payments Working Group</a> as
    a Recommendation using the
        <a href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">Recommendation track</a>. 
  </p><p>
      <abbr title="World Wide Web Consortium">W3C</abbr> recommends the wide deployment of this specification as a standard for
      the Web.
    </p><p>
      A <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation is a specification that, after extensive
      consensus-building, is endorsed by
      <abbr title="World Wide Web Consortium">W3C</abbr> and its Members, and
      has commitments from Working Group members to
      <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Requirements">royalty-free licensing</a>
      for implementations.
      Future updates to this Recommendation may incorporate
            <a href="https://www.w3.org/2021/Process-20211102/#allow-new-features">new features</a>.
    </p><p>
    
        This document was produced by a group
        operating under the
        <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/">1 August 2017 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>.
      
    
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                <a rel="disclosure" href="https://www.w3.org/groups/wg/payments/ipr">public list of any patent disclosures</a>
          made in connection with the deliverables of
          the group; that page also includes
          instructions for disclosing a patent. An individual who has actual
          knowledge of a patent which the individual believes contains
          <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#def-essential">Essential Claim(s)</a>
          must disclose the information in accordance with
          <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        
  </p><p>
                  This document is governed by the
                  <a id="w3c_process_revision" href="https://www.w3.org/2021/Process-20211102/">2 November 2021 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#payment-method-identifiers-pmis"><bdi class="secno">1. </bdi>
        Payment method identifiers (PMIs)
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#validity"><bdi class="secno">1.1 </bdi>
          Validity
        </a></li></ol></li><li class="tocline"><a class="tocxref" href="#url-based-payment-method-identifiers"><bdi class="secno">2. </bdi>
        URL-based payment method identifiers
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#validation"><bdi class="secno">2.1 </bdi>
          Validation
        </a></li><li class="tocline"><a class="tocxref" href="#comparison"><bdi class="secno">2.2 </bdi>
          Comparison
        </a></li><li class="tocline"><a class="tocxref" href="#fetching-dereferencing"><bdi class="secno">2.3 </bdi>
          Fetching (dereferencing)
        </a></li></ol></li><li class="tocline"><a class="tocxref" href="#standardized-payment-method-identifiers"><bdi class="secno">3. </bdi>
        Standardized payment method identifiers
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#validity-0"><bdi class="secno">3.1 </bdi>
          Validity
        </a></li><li class="tocline"><a class="tocxref" href="#comparison-0"><bdi class="secno">3.2 </bdi>
          Comparison
        </a></li></ol></li><li class="tocline"><a class="tocxref" href="#registry"><bdi class="secno">4. </bdi>
        Registry of standardized payment methods
      </a></li><li class="tocline"><a class="tocxref" href="#url-based-pmi-and-third-party-payment-handlers"><bdi class="secno">5. </bdi>
        URL-based <abbr title="payment method identifier">PMI</abbr> and third-party payment handlers
      </a></li><li class="tocline"><a class="tocxref" href="#security-considerations"><bdi class="secno">6. </bdi>
        Security considerations
      </a></li><li class="tocline"><a class="tocxref" href="#privacy-considerations"><bdi class="secno">7. </bdi>
        Privacy considerations
      </a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">8. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#index"><bdi class="secno">A. </bdi>Index</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#index-defined-here"><bdi class="secno">A.1 </bdi>Terms defined by this specification</a></li><li class="tocline"><a class="tocxref" href="#index-defined-elsewhere"><bdi class="secno">A.2 </bdi>Terms defined by reference</a></li></ol></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1 </bdi>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">B.2 </bdi>Informative references</a></li></ol></li></ol></nav>
    <section id="payment-method-identifiers-pmis"><div class="header-wrapper"><h2 id="x1-payment-method-identifiers-pmis"><bdi class="secno">1. </bdi>
        Payment method identifiers (PMIs)
      </h2><a class="self-link" href="#payment-method-identifiers-pmis" aria-label="Permalink for Section 1."></a></div>
      
      <p>
        A <dfn data-abbr="PMI" data-export="" data-lt="PMI|payment method identifier" data-plurals="payment method identifiers" id="dfn-pmi" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">payment method identifier</dfn> (<abbr title="payment method identifier">PMI</abbr>)
        is either a:
      </p>
      <ul>
        <li><a data-link-type="dfn" href="#dfn-url-based-payment-method-identifier" class="internalDFN" id="ref-for-dfn-url-based-payment-method-identifier-1">URL-based payment method identifier</a>,
        </li>
        <li>or a <a data-link-type="dfn" href="#dfn-standardized-payment-method-identifier" class="internalDFN" id="ref-for-dfn-standardized-payment-method-identifier-1">standardized payment method identifier</a>.
        </li>
      </ul>
      <section id="validity"><div class="header-wrapper"><h3 id="x1-1-validity"><bdi class="secno">1.1 </bdi>
          Validity
        </h3><a class="self-link" href="#validity" aria-label="Permalink for Section 1.1"></a></div>
        
        <p>
          Specifications that rely on <a data-link-type="dfn" href="#dfn-pmi" class="internalDFN" id="ref-for-dfn-pmi-1">payment method identifiers</a> <em class="rfc2119">MUST</em>
          specify their own rules for handling invalid payment method
          identifiers.
        </p>
        <p>
          The steps to <dfn data-export="" id="dfn-validate-a-payment-method-identifier" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">validate a payment method
          identifier</dfn> with a string <var data-type="string">pmi</var> are given by the
          following algorithm. It returns true if the <var data-type="string">pmi</var> is valid.
        </p>
        <ol class="algorithm">
          <li>Let <var data-type="URL">url</var> be the result of running the <a data-link-type="dfn" data-type="dfn" href="https://url.spec.whatwg.org/#concept-basic-url-parser" id="ref-for-index-term-basic-url-parser-1">basic URL parser</a>
          with <var data-type="string">pmi</var>.
          </li>
          <li>If <var data-type="URL">url</var> is failure, <a data-link-type="dfn" href="#dfn-validate-a-standardized-payment-method-identifier" class="internalDFN" id="ref-for-dfn-validate-a-standardized-payment-method-identifier-1">validate a standardized payment method identifier</a> with <var data-type="string">pmi</var> and return the result.
          </li>
          <li>Otherwise, <a data-link-type="dfn" href="#dfn-validate-a-url-based-payment-method-identifier" class="internalDFN" id="ref-for-dfn-validate-a-url-based-payment-method-identifier-1">validate a URL-based payment method identifier</a>
          passing <var data-type="URL">url</var> and return the result.
          </li>
        </ol>
      </section>
    </section>
    <section id="url-based-payment-method-identifiers"><div class="header-wrapper"><h2 id="x2-url-based-payment-method-identifiers"><bdi class="secno">2. </bdi>
        URL-based payment method identifiers
      </h2><a class="self-link" href="#url-based-payment-method-identifiers" aria-label="Permalink for Section 2."></a></div>
      
      <p>
        A <dfn data-export="" data-plurals="url-based payment method identifiers" id="dfn-url-based-payment-method-identifier" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">URL-based payment method identifier</dfn> is a
        <a data-link-type="dfn" data-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-index-term-url-1">URL</a> that is valid as per the steps to <a data-link-type="dfn" href="#dfn-validate-a-url-based-payment-method-identifier" class="internalDFN" id="ref-for-dfn-validate-a-url-based-payment-method-identifier-2">validate a URL-based payment method identifier</a>.
      </p>
      <div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div><div class="">
        <p>
          Developers wanting to use a URL-based payment method identifier for a
          third party payment handler are encouraged to read the <a href="https://github.com/w3c/payment-request-info/wiki/PaymentMethodPractice">
          Payment Method Best Practice</a> document.
        </p>
      </div></div>
      <section id="validation"><div class="header-wrapper"><h3 id="x2-1-validation"><bdi class="secno">2.1 </bdi>
          Validation
        </h3><a class="self-link" href="#validation" aria-label="Permalink for Section 2.1"></a></div>
        
        <p>
          The steps to <dfn data-export="" id="dfn-validate-a-url-based-payment-method-identifier" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">validate a URL-based payment method
          identifier</dfn> are given by the following algorithm. The algorithm
          takes a <a data-link-type="dfn" data-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-index-term-url-2">URL</a> <var data-type="URL">url</var> as input and returns true if the URL is
          valid:
        </p>
        <ol class="algorithm">
          <li>If <var data-type="URL">url</var>'s <a data-link-type="dfn" data-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-index-term-scheme-for-url-1">scheme</a> is not "https", return false.
          </li>
          <li>If <var data-type="URL">url</var>'s <a data-link-type="dfn" data-type="dfn" href="https://url.spec.whatwg.org/#concept-url-username" id="ref-for-index-term-username-for-url-1">username</a> or <a data-link-type="dfn" data-type="dfn" href="https://url.spec.whatwg.org/#concept-url-password" id="ref-for-index-term-password-for-url-1">password</a> is not the empty
          string, return false.
          </li>
          <li>Otherwise, return true.
          </li>
        </ol>
        <div class="example" id="example-valid-and-invalid-url-based-pmis">
        <div class="marker">
    <a class="self-link" href="#example-valid-and-invalid-url-based-pmis">Example<bdi> 1</bdi></a><span class="example-title">: valid and invalid URL-based PMIs</span>
  </div> <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> valid = [
  {
    <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"https://example.com/pay"</span>,
  },
  {
    <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"https://example.com/pay?version=1"</span>,
  },
  {
    <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"https://example.com/pay/version/1"</span>,
  },
];

<span class="hljs-keyword">const</span> invalid = [
  {
    <span class="hljs-comment">// ‚ùå Uses http://, a username, and a password.</span>
    <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"http://username:password@example.com/pay"</span>,
  },
  {
    <span class="hljs-comment">// ‚ùå Uses unknown URI scheme.</span>
    <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"unknown://example.com/pay"</span>,
  },
];</code></pre>
      </div>
      </section>
      <section id="comparison"><div class="header-wrapper"><h3 id="x2-2-comparison"><bdi class="secno">2.2 </bdi>
          Comparison
        </h3><a class="self-link" href="#comparison" aria-label="Permalink for Section 2.2"></a></div>
        
        <p data-tests="payment-request-ctor-pmi-handling.https.sub.html">
          User agents <em class="rfc2119">MUST</em> perform comparisons of <a data-link-type="dfn" href="#dfn-url-based-payment-method-identifier" class="internalDFN" id="ref-for-dfn-url-based-payment-method-identifier-2">URL-based payment method identifiers</a> using [<cite><a class="bibref" data-link-type="biblio" href="#bib-url" title="URL Standard">URL</a></cite>]'s <a data-link-type="dfn" data-type="dfn" href="https://url.spec.whatwg.org/#concept-url-equals" id="ref-for-index-term-equal-for-url-1">equal</a>.
        </p>
      </section>
      <section id="fetching-dereferencing"><div class="header-wrapper"><h3 id="x2-3-fetching-dereferencing"><bdi class="secno">2.3 </bdi>
          Fetching (dereferencing)
        </h3><a class="self-link" href="#fetching-dereferencing" aria-label="Permalink for Section 2.3"></a></div>
        
        <p>
          It is <em class="rfc2119">OPTIONAL</em> for user agents to <a data-link-type="dfn" data-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-index-term-fetch-1">fetch</a> a <a data-link-type="dfn" href="#dfn-url-based-payment-method-identifier" class="internalDFN" id="ref-for-dfn-url-based-payment-method-identifier-3">URL-based payment method identifier</a>.
        </p>
      </section>
    </section>
    <section id="standardized-payment-method-identifiers"><div class="header-wrapper"><h2 id="x3-standardized-payment-method-identifiers"><bdi class="secno">3. </bdi>
        Standardized payment method identifiers
      </h2><a class="self-link" href="#standardized-payment-method-identifiers" aria-label="Permalink for Section 3."></a></div>
      
      <p>
        A <dfn data-export="" data-plurals="standardized payment method identifiers" id="dfn-standardized-payment-method-identifier" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">standardized payment method identifier</dfn> is a
        string that represents a <a data-link-type="dfn" href="#dfn-standardized-payment-method" class="internalDFN" id="ref-for-dfn-standardized-payment-method-1">standardized payment method</a>.
      </p>
      <p>
        The <dfn id="dfn-syntax-of-a-standardized-payment-method-identifier" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">syntax of a standardized payment method identifier</dfn> is
        given by the following [<cite><a class="bibref" data-link-type="biblio" href="#bib-abnf" title="Augmented BNF for Syntax Specifications: ABNF">ABNF</a></cite>]:
      </p>
      <pre class="ABFN" aria-busy="false"><code class="hljs">stdpmi = part *( "-" part )
part = 1loweralpha *( DIGIT / loweralpha )
loweralpha =  %x61-7A</code></pre>
      <p>
        User agents <em class="rfc2119">MAY</em> support zero or more <a data-link-type="dfn" href="#dfn-standardized-payment-method-identifier" class="internalDFN" id="ref-for-dfn-standardized-payment-method-identifier-2">standardized payment method identifiers</a> listed in section <a href="#registry" data-matched-text="[[[#registry]]]" class="sec-ref"><bdi class="secno">4. </bdi>
        Registry of standardized payment methods</a>.
      </p>
      <section id="validity-0"><div class="header-wrapper"><h3 id="x3-1-validity"><bdi class="secno">3.1 </bdi>
          Validity
        </h3><a class="self-link" href="#validity-0" aria-label="Permalink for Section 3.1"></a></div>
        
        <p>
          The steps to <dfn id="dfn-validate-a-standardized-payment-method-identifier" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">validate a standardized payment method
          identifier</dfn> are given by the following algorithm. The algorithm
          takes a <var data-type="string">string</var> as input and returns true if the identifier
          is valid:
        </p>
        <ol class="algorithm">
          <li>Return true if <var data-type="string">string</var> conforms to the <a data-link-type="dfn" href="#dfn-syntax-of-a-standardized-payment-method-identifier" class="internalDFN" id="ref-for-dfn-syntax-of-a-standardized-payment-method-identifier-1">syntax of a standardized payment method identifier</a>. Otherwise, return false.
          </li>
        </ol>
        <div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div><aside class="">
          <p>
            When used in an API, the following method identifiers are all
            ignored by the user agent. Some user agents might inform developers
            that identifiers are invalid to help them fix issues.
          </p>
          <p>
            The example below refers to the "basic-card" standardized payment
            method identifier. Although the Web Payments Working Group has
            discontinued that work, the identifier serves here as an example.
          </p>
          <div class="example" id="example-valid-and-invalid-identifiers">
        <div class="marker">
    <a class="self-link" href="#example-valid-and-invalid-identifiers">Example<bdi></bdi></a><span class="example-title">: Valid and invalid identifiers</span>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">const</span> valid = [
  {
    <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"basic-card"</span>,
  },
];

<span class="hljs-keyword">const</span> invalid = [
  {
    <span class="hljs-comment">// ‚ùå Contains Unicode character outside the valid ranges.</span>
    <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"basic-üí≥"</span>,
  },
  {
    <span class="hljs-comment">// ‚ùå Contains uppercase characters.</span>
    <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"Basic-Card"</span>,
  },
  {
    <span class="hljs-comment">// ‚ùå Contains Unicode characters outside the valid ranges.</span>
    <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"¬°basic-*-card!"</span>,
  },
];</code></pre>
      </div>
        </aside></div>
      </section>
      <section id="comparison-0"><div class="header-wrapper"><h3 id="x3-2-comparison"><bdi class="secno">3.2 </bdi>
          Comparison
        </h3><a class="self-link" href="#comparison-0" aria-label="Permalink for Section 3.2"></a></div>
        
        <p data-tests="payment-request-ctor-pmi-handling.https.sub.html">
          For <a data-link-type="dfn" href="#dfn-standardized-payment-method-identifier" class="internalDFN" id="ref-for-dfn-standardized-payment-method-identifier-3">standardized payment method identifiers</a>, user agents <em class="rfc2119">MUST</em>
          perform string comparisons using <a data-link-type="dfn" data-type="dfn" href="https://infra.spec.whatwg.org/#string-is" id="ref-for-index-term-is-for-string-1">is</a>.
        </p>
      </section>
    </section>
    <section class="informative" id="registry"><div class="header-wrapper"><h2 id="x4-registry-of-standardized-payment-methods"><bdi class="secno">4. </bdi>
        Registry of standardized payment methods
      </h2><a class="self-link" href="#registry" aria-label="Permalink for Section 4."></a></div><p><em>This section is non-normative.</em></p>
      
      <div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>Note</span></div><aside class="">
        <p>
          There is no need to register a <a data-link-type="dfn" href="#dfn-url-based-payment-method-identifier" class="internalDFN" id="ref-for-dfn-url-based-payment-method-identifier-4">URL-based payment method identifier</a>.
        </p>
        <p>
          Organizations seeking to mint a new identifier for a payment method
          are encouraged to <a href="https://www.w3.org/Consortium/join">join
          the <abbr title="World Wide Web Consortium">W3C</abbr></a> and follow the <a href="https://www.w3.org/Consortium/Process/"><abbr title="World Wide Web Consortium">W3C</abbr> process</a>.
        </p>
      </aside></div>
      <p>
        A <dfn id="dfn-standardized-payment-method" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">standardized payment method</dfn> is a payment method that has
        undergone standardization at the <abbr title="World Wide Web Consortium">W3C</abbr>, and is listed in this registry.
      </p>
      <p>
        At this time there are no <a data-link-type="dfn" href="#dfn-standardized-payment-method-identifier" class="internalDFN" id="ref-for-dfn-standardized-payment-method-identifier-4">standardized payment method identifiers</a>.
      </p>
    </section>
    <section class="informative" id="url-based-pmi-and-third-party-payment-handlers"><div class="header-wrapper"><h2 id="x5-url-based-pmi-and-third-party-payment-handlers"><bdi class="secno">5. </bdi>
        URL-based <abbr title="payment method identifier">PMI</abbr> and third-party payment handlers
      </h2><a class="self-link" href="#url-based-pmi-and-third-party-payment-handlers" aria-label="Permalink for Section 5."></a></div><p><em>This section is non-normative.</em></p>
      
      <p>
        Developers wanting to use a URL-based payment method identifier for a
        third party payment handler are encouraged to read the
        <cite><a data-matched-text="[[[payment-method-manifest]]]" href="https://www.w3.org/TR/payment-method-manifest/" id="ref-for-index-term-payment-method-manifest-1">Payment Method Manifest</a></cite> specification and the <a href="https://github.com/w3c/payment-request-info/wiki/PaymentMethodPractice">
        Payment Method Best Practice</a> wiki page. Together, these documents
        describe how to manage the ecosystem of authorized payment handlers for
        a payment method, including just-in-time payment handler installation
        by the browser.
      </p>
    </section>
    <section id="security-considerations"><div class="header-wrapper"><h2 id="x6-security-considerations"><bdi class="secno">6. </bdi>
        Security considerations
      </h2><a class="self-link" href="#security-considerations" aria-label="Permalink for Section 6."></a></div>
      
      <p>
        This specification does not introduce any new security considerations.
      </p>
    </section>
    <section id="privacy-considerations"><div class="header-wrapper"><h2 id="x7-privacy-considerations"><bdi class="secno">7. </bdi>
        Privacy considerations
      </h2><a class="self-link" href="#privacy-considerations" aria-label="Permalink for Section 7."></a></div>
      
      <p>
        There are no known privacy or security concerns to be taken into
        considerations at this time.
      </p>
    </section>
    <section id="conformance"><div class="header-wrapper"><h2 id="x8-conformance"><bdi class="secno">8. </bdi>Conformance</h2><a class="self-link" href="#conformance" aria-label="Permalink for Section 8."></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and <em class="rfc2119">OPTIONAL</em> in this document
        are to be interpreted as described in
        <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p></section>
    <section id="index" class="appendix"><div class="header-wrapper"><h2 id="a-index"><bdi class="secno">A. </bdi>Index</h2><a class="self-link" href="#index" aria-label="Permalink for Appendix A."></a></div><section id="index-defined-here"><div class="header-wrapper"><h3 id="a-1-terms-defined-by-this-specification"><bdi class="secno">A.1 </bdi>Terms defined by this specification</h3><a class="self-link" href="#index-defined-here" aria-label="Permalink for Appendix A.1"></a></div>
    
    <ul class="index">
    <li>
      <a class="index-term" href="#dfn-pmi">payment method identifier</a> 
    <span class="print-only">¬ß1.</span></li><li>
      <a class="index-term" href="#dfn-standardized-payment-method">standardized payment method</a> 
    <span class="print-only">¬ß4.</span></li><li>
      <a class="index-term" href="#dfn-standardized-payment-method-identifier">standardized payment method identifier</a> 
    <span class="print-only">¬ß3.</span></li><li>
      <a class="index-term" href="#dfn-syntax-of-a-standardized-payment-method-identifier">syntax of a standardized payment method identifier</a> 
    <span class="print-only">¬ß3.</span></li><li>
      <a class="index-term" href="#dfn-url-based-payment-method-identifier">URL-based payment method identifier</a> 
    <span class="print-only">¬ß2.</span></li><li>
      <a class="index-term" href="#dfn-validate-a-payment-method-identifier">validate a payment method identifier</a> 
    <span class="print-only">¬ß1.1</span></li><li>
      <a class="index-term" href="#dfn-validate-a-standardized-payment-method-identifier">validate a standardized payment method identifier</a> 
    <span class="print-only">¬ß3.1</span></li><li>
      <a class="index-term" href="#dfn-validate-a-url-based-payment-method-identifier">validate a URL-based payment method identifier</a> 
    <span class="print-only">¬ß2.1</span></li>
  </ul>
  </section><section id="index-defined-elsewhere"><div class="header-wrapper"><h3 id="a-2-terms-defined-by-reference"><bdi class="secno">A.2 </bdi>Terms defined by reference</h3><a class="self-link" href="#index-defined-elsewhere" aria-label="Permalink for Appendix A.2"></a></div>
    
    <ul class="index">
    <li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-fetch">FETCH</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://fetch.spec.whatwg.org/#concept-fetch" id="index-term-fetch" tabindex="0" aria-haspopup="dialog">fetch</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra">INFRA</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://infra.spec.whatwg.org/#string-is" id="index-term-is-for-string" tabindex="0" aria-haspopup="dialog">is (for <code>string</code>)</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-method-manifest">PAYMENT-METHOD-MANIFEST</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.w3.org/TR/payment-method-manifest/" id="index-term-payment-method-manifest" tabindex="0" aria-haspopup="dialog">Payment Method Manifest</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request">PAYMENT-REQUEST</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.w3.org/TR/payment-request/" id="index-term-payment-request-api" tabindex="0" aria-haspopup="dialog">Payment Request API</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-url">URL</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-basic-url-parser" id="index-term-basic-url-parser" tabindex="0" aria-haspopup="dialog">basic URL parser</span>
  </li><li>
    <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-url-equals" id="index-term-equal-for-url" tabindex="0" aria-haspopup="dialog">equal (for <code>url</code>)</span>
  </li><li>
    <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-url-password" id="index-term-password-for-url" tabindex="0" aria-haspopup="dialog">password (for <code>url</code>)</span>
  </li><li>
    <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-url-scheme" id="index-term-scheme-for-url" tabindex="0" aria-haspopup="dialog">scheme (for <code>url</code>)</span>
  </li><li>
    <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-url" id="index-term-url" tabindex="0" aria-haspopup="dialog">URL</span>
  </li><li>
    <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-url-username" id="index-term-username-for-url" tabindex="0" aria-haspopup="dialog">username (for <code>url</code>)</span>
  </li>
        </ul>
      </li>
  </ul>
  </section></section>
  

<section id="references" class="appendix"><div class="header-wrapper"><h2 id="b-references"><bdi class="secno">B. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix B."></a></div><section id="normative-references"><div class="header-wrapper"><h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>Normative references</h3><a class="self-link" href="#normative-references" aria-label="Permalink for Appendix B.1"></a></div>
    
    <dl class="bibliography"><dt id="bib-abnf">[ABNF]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc5234"><cite>Augmented BNF for Syntax Specifications: ABNF</cite></a>. D. Crocker, Ed.; P. Overell.  IETF. January 2008. Internet Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc5234">https://www.rfc-editor.org/rfc/rfc5234</a>
    </dd><dt id="bib-fetch">[fetch]</dt><dd>
      <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
    </dd><dt id="bib-infra">[infra]</dt><dd>
      <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
    </dd><dt id="bib-rfc2119">[RFC2119]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd><dt id="bib-rfc8174">[RFC8174]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
    </dd><dt id="bib-url">[URL]</dt><dd>
      <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
    </dd></dl>
  </section><section id="informative-references"><div class="header-wrapper"><h3 id="b-2-informative-references"><bdi class="secno">B.2 </bdi>Informative references</h3><a class="self-link" href="#informative-references" aria-label="Permalink for Appendix B.2"></a></div>
    
    <dl class="bibliography"><dt id="bib-payment-method-manifest">[payment-method-manifest]</dt><dd>
      <a href="https://www.w3.org/TR/payment-method-manifest/" id="ref-for-index-term-payment-method-manifest-2"><cite>Payment Method Manifest</cite></a>. Dapeng(Max) Liu; Domenic Denicola; Zach Koch.  W3C. 12 December 2017. W3C Working Draft. URL: <a href="https://www.w3.org/TR/payment-method-manifest/" id="ref-for-index-term-payment-method-manifest-3">https://www.w3.org/TR/payment-method-manifest/</a>
    </dd><dt id="bib-payment-request">[payment-request]</dt><dd>
      <a href="https://www.w3.org/TR/payment-request/" id="ref-for-index-term-payment-request-api-2"><cite>Payment Request API</cite></a>. Marcos Caceres; Rouslan Solomakhin; Ian Jacobs.  W3C. 30 September 2021. W3C Proposed Recommendation. URL: <a href="https://www.w3.org/TR/payment-request/" id="ref-for-index-term-payment-request-api-3">https://www.w3.org/TR/payment-request/</a>
    </dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">‚Üë</abbr></a>
  </p><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-pmi" aria-label="Links in this document to definition: payment method identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-pmi" aria-label="Permalink for definition: payment method identifier. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-pmi-1" title="¬ß 1.1 Validity">¬ß 1.1 Validity</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-validate-a-payment-method-identifier" aria-label="Links in this document to definition: validate a payment method identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-validate-a-payment-method-identifier" aria-label="Permalink for definition: validate a payment method identifier. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-url-based-payment-method-identifier" aria-label="Links in this document to definition: URL-based payment method identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-url-based-payment-method-identifier" aria-label="Permalink for definition: URL-based payment method identifier. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-url-based-payment-method-identifier-1" title="¬ß 1. Payment method identifiers (PMIs)">¬ß 1. Payment method identifiers (PMIs)</a> 
  </li><li>
    <a href="#ref-for-dfn-url-based-payment-method-identifier-2" title="¬ß 2.2 Comparison">¬ß 2.2 Comparison</a> 
  </li><li>
    <a href="#ref-for-dfn-url-based-payment-method-identifier-3" title="¬ß 2.3 Fetching (dereferencing)">¬ß 2.3 Fetching (dereferencing)</a> 
  </li><li>
    <a href="#ref-for-dfn-url-based-payment-method-identifier-4" title="¬ß 4. Registry of standardized payment methods">¬ß 4. Registry of standardized payment methods</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-validate-a-url-based-payment-method-identifier" aria-label="Links in this document to definition: validate a URL-based payment method identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-validate-a-url-based-payment-method-identifier" aria-label="Permalink for definition: validate a URL-based payment method identifier. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-validate-a-url-based-payment-method-identifier-1" title="¬ß 1.1 Validity">¬ß 1.1 Validity</a> 
  </li><li>
    <a href="#ref-for-dfn-validate-a-url-based-payment-method-identifier-2" title="¬ß 2. URL-based payment method identifiers">¬ß 2. URL-based payment method identifiers</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-standardized-payment-method-identifier" aria-label="Links in this document to definition: standardized payment method identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-standardized-payment-method-identifier" aria-label="Permalink for definition: standardized payment method identifier. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-standardized-payment-method-identifier-1" title="¬ß 1. Payment method identifiers (PMIs)">¬ß 1. Payment method identifiers (PMIs)</a> 
  </li><li>
    <a href="#ref-for-dfn-standardized-payment-method-identifier-2" title="¬ß 3. Standardized payment method identifiers">¬ß 3. Standardized payment method identifiers</a> 
  </li><li>
    <a href="#ref-for-dfn-standardized-payment-method-identifier-3" title="¬ß 3.2 Comparison">¬ß 3.2 Comparison</a> 
  </li><li>
    <a href="#ref-for-dfn-standardized-payment-method-identifier-4" title="¬ß 4. Registry of standardized payment methods">¬ß 4. Registry of standardized payment methods</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-syntax-of-a-standardized-payment-method-identifier" aria-label="Links in this document to definition: syntax of a standardized payment method identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-syntax-of-a-standardized-payment-method-identifier" aria-label="Permalink for definition: syntax of a standardized payment method identifier. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-syntax-of-a-standardized-payment-method-identifier-1" title="¬ß 3.1 Validity">¬ß 3.1 Validity</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-validate-a-standardized-payment-method-identifier" aria-label="Links in this document to definition: validate a standardized payment method identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-validate-a-standardized-payment-method-identifier" aria-label="Permalink for definition: validate a standardized payment method identifier. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-validate-a-standardized-payment-method-identifier-1" title="¬ß 1.1 Validity">¬ß 1.1 Validity</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-standardized-payment-method" aria-label="Links in this document to definition: standardized payment method">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-standardized-payment-method" aria-label="Permalink for definition: standardized payment method. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-standardized-payment-method-1" title="¬ß 3. Standardized payment method identifiers">¬ß 3. Standardized payment method identifiers</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-fetch" aria-label="Links in this document to definition: fetch">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://fetch.spec.whatwg.org/#concept-fetch" aria-label="Permalink for definition: fetch. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-fetch-1" title="¬ß 2.3 Fetching (dereferencing)">¬ß 2.3 Fetching (dereferencing)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-is-for-string" aria-label="Links in this document to definition: is (for string)">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://infra.spec.whatwg.org/#string-is" aria-label="Permalink for definition: is (for string). Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-is-for-string-1" title="¬ß 3.2 Comparison">¬ß 3.2 Comparison</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-payment-method-manifest" aria-label="Links in this document to definition: Payment Method Manifest">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/payment-method-manifest/" aria-label="Permalink for definition: Payment Method Manifest. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-payment-method-manifest-1" title="¬ß 5. URL-based PMI and third-party payment handlers">¬ß 5. URL-based PMI and third-party payment handlers</a> 
  </li><li>
    <a href="#ref-for-index-term-payment-method-manifest-2" title="¬ß B.2 Informative references">¬ß B.2 Informative references</a> <a href="#ref-for-index-term-payment-method-manifest-3" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-payment-request-api" aria-label="Links in this document to definition: Payment Request API">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/payment-request/" aria-label="Permalink for definition: Payment Request API. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-payment-request-api-1" title="¬ß Abstract">¬ß Abstract</a> 
  </li><li>
    <a href="#ref-for-index-term-payment-request-api-2" title="¬ß B.2 Informative references">¬ß B.2 Informative references</a> <a href="#ref-for-index-term-payment-request-api-3" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-basic-url-parser" aria-label="Links in this document to definition: basic URL parser">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://url.spec.whatwg.org/#concept-basic-url-parser" aria-label="Permalink for definition: basic URL parser. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-basic-url-parser-1" title="¬ß 1.1 Validity">¬ß 1.1 Validity</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-equal-for-url" aria-label="Links in this document to definition: equal (for url)">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://url.spec.whatwg.org/#concept-url-equals" aria-label="Permalink for definition: equal (for url). Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-equal-for-url-1" title="¬ß 2.2 Comparison">¬ß 2.2 Comparison</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-password-for-url" aria-label="Links in this document to definition: password (for url)">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://url.spec.whatwg.org/#concept-url-password" aria-label="Permalink for definition: password (for url). Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-password-for-url-1" title="¬ß 2.1 Validation">¬ß 2.1 Validation</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-scheme-for-url" aria-label="Links in this document to definition: scheme (for url)">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://url.spec.whatwg.org/#concept-url-scheme" aria-label="Permalink for definition: scheme (for url). Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-scheme-for-url-1" title="¬ß 2.1 Validation">¬ß 2.1 Validation</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-url" aria-label="Links in this document to definition: URL">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://url.spec.whatwg.org/#concept-url" aria-label="Permalink for definition: URL. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-url-1" title="¬ß 2. URL-based payment method identifiers">¬ß 2. URL-based payment method identifiers</a> 
  </li><li>
    <a href="#ref-for-index-term-url-2" title="¬ß 2.1 Validation">¬ß 2.1 Validation</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-username-for-url" aria-label="Links in this document to definition: username (for url)">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://url.spec.whatwg.org/#concept-url-username" aria-label="Permalink for definition: username (for url). Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-index-term-username-for-url-1" title="¬ß 2.1 Validation">¬ß 2.1 Validation</a> 
  </li>
  </ul>
    </div><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>